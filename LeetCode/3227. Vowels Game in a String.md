---
tags:
  - LeetCode
---

# [3227. Vowels Game in a String](https://leetcode.com/problems/vowels-game-in-a-string/description/)  

+ 日期 : 2025/09/12  

## 問題描述  

給定一個字串 `s`，由小寫組成，Alice 和 Bob 玩一個遊戲，  
Alice 找出長度不為 `0` 的子字串，子字串包含奇數個母音字母，  
Bob 找出長度不為 `0` 的子字串，子字串包含偶數個母音字母，  
每輪玩家都找出可能的最長字串並刪除，  
Alice 先手，若 Alice 找不到子字串，Bob 獲勝，反之亦然，  
問 Alice 是否能獲勝？  

## 直覺想法  

直覺上來說，直接模擬遊戲過程，因此步驟如下：  

1. 紀錄當前誰的回合  
2. 看目前字串中，最大奇數和偶數是多少  
3. 找到母音數量為 `2.` 的子字串，刪除  
4. 換人繼續  
5. 若字串為空或母音為空，則當前玩家輸  

## 題解  

```cpp=
class Solution {
public:
    bool isvowel(char c) {
        return (c == 'a') || (c == 'e') || (c == 'i') || (c == 'o') || (c == 'u');
    }
    bool doesAliceWin(string s) {
        int vcnt = 0;
        for(char c : s) {
            if(isvowel(c))
                vcnt += 1;
        }
        bool turn = 0;
        while(1) {
            if(s.empty() || vcnt == 0)   break;
            int target = (turn == 0) ? 1 : 0;
            if(vcnt % 2 == target)
                target = vcnt;
            else
                target = vcnt - 1;
            if(target < 0)  break;
            vcnt -= target;
            if(target == 0 && vcnt == s.size()) break;
            int idx = 0;
            while(target > 0) {
                if(isvowel(s[idx]))
                    target -= 1;
            }
            s = s.substr(idx+1);
            turn ^= 1;
        }
        return (turn == 0) ? false : true;
    }
};
```

Time Complexity : $O(n)$  
Space Complexity : $O(1)$  

這題噁心的是，除非字串為空或是母音為空才結束遊戲，  
若母音數量不為 `0`，Bob 進行遊戲時可以刪除 `0` 個母音，因為 `0` 是偶數，  
回頭觀察題目的情況  

1. 字串沒有母音  
2. 字串有母音  
  + 母音偶數個  
  + 母音奇數個  

情況一，由於 Alice 先手，且沒有母音，因此 Alice 輸。  
情況二，若母音為奇數， Alice 一定能贏，因為 Alice 可以刪除所有母音，  
但若母音是偶數，因為 Alice 每次都刪除最大化，那麼 `偶-奇=奇`，且 Bob 甚至可以刪除 `0` 個母音，  
因此不管 Bob 有沒有刪除母音為 `0` 的子字串，最後母音一定會被 Alice 刪完，  
因此可以斷定，情況二中 Alice 一定會贏。  

```cpp=
class Solution {
public:
    bool doesAliceWin(string s) {
        return ranges::any_of(s, [](char c) {
            return c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u';
        });
    }
};
```

Time Complexity : $O(n)$  
Space Complexity : $O(1)$  

## 心得  

這種題目我覺得超難，首先是第一個我的解法，  
模擬過程中，我要怎麼樣驗證，這是我一直不清楚的，導致今天也是試錯了 3 次才過，  
如果懂得分析題目，第二種解法就能直接寫出來，  
如果嘗試拿筆推演能達到這種境界嗎？  
