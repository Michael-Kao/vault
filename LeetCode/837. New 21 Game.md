---
tags:
  - LeetCode
---

# [837. New 21 Game](https://leetcode.com/problems/new-21-game/description/)  

+ 日期 : 2025/08/17  

## 問題描述  

I don't know why I wasted my time on this problem.  

## 直覺想法  

Go learn some basic DP then come back to this problem.  

## 題解  

```cpp=
/* This answer won't pass */
class Solution {
public:
    double new21Game(int n, int k, int maxPts) {
        vector<double> dp(n+1, 0);
        dp[0] = 1;
        for(int i = 1; i <= n; ++i) {
            for(int j = 1; j <= maxPts; ++j) {
                // get j if target is <= j
                // and make sure game is still working before get current card
                if(i - j >= 0 && i - j < k) {
                    dp[i] += dp[i - j] / maxPts;
                }
            }
        }
        double res = 0;
        for(int i = k; i <= n; ++i) {
            res += dp[i];
        }
        return res;
    }
};
```

Time Complexity : $O(n*m)$  
Space Complexity : $O(n)$  

```cpp=
class Solution {
public:
    double new21Game(int n, int k, int maxPts) {
        vector<double> dp(n + 1);
        dp[0] = 1;
        double s = k > 0 ? 1 : 0;
        for (int i = 1; i <= n; i++) {
            dp[i] = s / maxPts;
            if (i < k) {
                s += dp[i];
            }
            if (i - maxPts >= 0 && i - maxPts < k) {
                s -= dp[i - maxPts];
            }
        }
        return accumulate(dp.begin() + k, dp.end(), 0.0);
    }
};
```

Time Complexity : $O(n)$  
Space Complexity : $O(n)$  

## 心得  

Go outside or play some games, just don't waste your time on this problem if you don't know DP.  
