---
tags:
  - LeetCode
---

# [898. Bitwise ORs of Subarrays](https://leetcode.com/problems/bitwise-ors-of-subarrays/description/)  

+ 日期 : 2025/07/31  

## 問題描述  

給定一個整數陣列 `arr`，找出所有子陣列，  
回傳子陣列進行 `OR` 運算後的結果總共有多少個不同的值。  

## 直覺想法  

由於子陣列必須照著順序，可以從後方開始遍歷來建立目前計算過的子陣列，  
對於每個 `index i` 來說，由 `i` 開始的子陣列必須接續著 `i+1` 的子陣列，  
因此需要一個 `set` 來儲存目前前一個子陣列的 `OR` 結果，  
以及一個 `set` 來儲存目前所有的 `OR` 結果。  

## 題解  

```cpp=
class Solution {
public:
    int subarrayBitwiseORs(vector<int>& arr) {
        int n = arr.size();
        unordered_set<int> seen;
        unordered_set<int> pre;
        for(int i = n-1; i >= 0; --i) {
            unordered_set<int> tmp;
            tmp.insert(arr[i]);
            for(int num : pre) {
                tmp.insert((num | arr[i]));
            }
            seen.insert(tmp.begin(), tmp.end());
            pre = tmp;
        }
        return seen.size();
    }
};
```

Time Complexity : $O(n^2)$  
Space Complexity : $O(n)$  

## 心得  

這種題目最難的是怎麼證明這是最佳解吧...  
還是說這不是最佳呢？  
