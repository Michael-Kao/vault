---
tags:
  - LeetCode
---

# [36. Valid Sudoku](https://leetcode.com/problems/valid-sudoku/description/)  

+ 日期 : 2025/08/30  

## 問題描述  

給定一個 `9 x 9` 的矩陣，問該矩陣是否為一個有效的數獨盤面。  

數獨盤面需滿足以下條件：  

1. 每一行只能包含 `1-9` 的數字，且不能重複。  
2. 每一列只能包含 `1-9` 的數字，且不能重複。  
3. 矩陣由 `9` 個 `3 x 3` 矩陣組成，每一個 `3 x 3` 的子矩陣只能包含 `1-9` 的數字，且不能重複。  

## 直覺想法  

這題最複雜的是第三個條件，每個 `3 x 3` 的子矩陣要怎麼去判斷。  
觀察一下，矩陣是由 `9` 個 `3 x 3` 的子矩陣組成，為了避免複雜化，先從 `row 0` 開始看，  
可以注意到，在第一個 `3 x 3` 的子矩陣中，`row 0` 的 `col` 只能是 `0, 1, 2`，  
第二個 `3 x 3` 的子矩陣中，`row 0` 的 `col` 只能是 `3, 4, 5`，  
第三個 `3 x 3` 的子矩陣中，`row 0` 的 `col` 只能是 `6, 7, 8`，  
如同第三點所述，將矩陣拆分成 `3 x 3` 的子矩陣，等同於將 `row` 和 `col` 都除以 `3`，  
因此可以用 `(row // 3, col // 3)` 來表示該數字所在的 `3 x 3` 子矩陣。  

## 題解  

```cpp=
class Solution {
public:
    bool isValidSudoku(vector<vector<char>>& board) {
        vector<unordered_set<int>> row(9), col(9);
        vector<vector<unordered_set<int>>> square(3, vector<unordered_set<int>>(3));
        for(int i = 0; i < 9; ++i) {
            for(int j = 0; j < 9; ++j) {
                if(board[i][j] == '.')  continue;
                int val = board[i][j] - '0';
                if(row[i].count(val) || col[j].count(val) ||
                    square[i / 3][j / 3].count(val))
                        return false;
                row[i].insert(val);
                col[j].insert(val);
                square[i / 3][j / 3].insert(val);
            }
        }
        return true;
    }
};
```

Time Complexity : $O(n^2)$  
Space Complexity : $O(n^2)$  

## 心得  

這題是 `Neetcode 150` 的題目，由於關鍵是 `Hash Map`，因此這題刷過蠻多次。  
