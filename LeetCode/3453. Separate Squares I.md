---
tags:
  - LeetCode
---

# [3453. Separate Squares I](https://leetcode.com/problems/separate-squares-i/description/)  

+ 日期 : 2026/01/13  

## 問題描述  

在 `double` 上做二分搜  

## 直覺想法  

I just want to quit.  

更正一下，我原先的 `code` 其實是對的，只是我把限制放太嚴，導致一直計算到 `TLE`，修正後沒問題  

## 題解  

```cpp=
class Solution {
public:
    double separateSquares(vector<vector<int>>& squares) {
        double totalArea = 0;
        double low = 2e9, high = -2e9;

        for (const auto& s : squares) {
            double x = s[0], y = s[1], l = s[2];
            totalArea += l * l;
            low = min(low, y);
            high = max(high, y + l);
        }

        // 進行固定次數的二分搜尋（如 100 次）可以確保精度達到 10^-5 以上
        for (int i = 0; i < 80; ++i) {
            double mid = low + (high - low) / 2;
            if (getAreaBelow(squares, mid) >= totalArea / 2.0) {
                high = mid; // 嘗試找更小的 y
            } else {
                low = mid;
            }
        }
        return high;
    }

private:
    double getAreaBelow(const vector<vector<int>>& squares, double lineY) {
        double area = 0;
        for (const auto& s : squares) {
            double y = s[1], l = s[2];
            if (y >= lineY) {
                // 正方形整個在線上方
                continue;
            } else if (y + l <= lineY) {
                // 正方形整個在線下方
                area += l * l;
            } else {
                // 正方形被線橫切
                area += l * (lineY - y);
            }
        }
        return area;
    }
};
```

Time Complexity : $O(nlogm)$  
Space Complexity : $O(1)$  

## 心得  

我拿著錯誤的程式碼，給 `Gemini Pro 3` 一修就過了，要沒工作了哈哈  
