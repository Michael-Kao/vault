---
tags:
  - LeetCode
---

# [1912. Design Movie Rental System](https://leetcode.com/problems/design-movie-rental-system/description/)  

+ 日期 : 2025/09/21  

## 問題描述  

太麻煩了  

## 直覺想法  

I don't know how but I did it tho  

## 題解  

```cpp=
class comp {
public:
    bool operator()(const pair<int, int> &a, const pair<int, int> &b) const {
        if(a.first == b.first)
            return a.second < b.second;
        return a.first < b.first;
    }
};
class MovieRentingSystem {
public:
    vector<unordered_map<int, bool>> isRent; // shop -> movie
    vector<unordered_map<int, int>> price; // shop -> moive -> price
    unordered_map<int, set<pair<int, int>, comp>> searcher; // moive -> shop
    map<int, set<pair<int, int>, comp>> rented; // price -> unrented({shop, moive})
    MovieRentingSystem(int n, vector<vector<int>>& entries) 
        : isRent(n), price(n){
        for(vector<int> &entry : entries) {
            int shop = entry[0];
            int movie = entry[1];
            int pri = entry[2];

            isRent[shop][movie] = false;
            price[shop][movie] = pri;
            searcher[movie].insert({pri, shop});
        }
    }
    
    vector<int> search(int movie) {
        vector<int> res;
        int cnt = 0;
        for(auto [_, shop] : searcher[movie]) {
            if(isRent[shop][movie]) continue;
            res.push_back(shop);
            cnt += 1;
            if(cnt == 5)    break;
        }
        return res;
    }
    
    void rent(int shop, int movie) {
        int pri = price[shop][movie];
        isRent[shop][movie] = true;
        rented[pri].insert({shop, movie});
    }
    
    void drop(int shop, int movie) {
        isRent[shop][movie] = false;
    }
    
    vector<vector<int>> report() {
        vector<vector<int>> res;
        int cnt = 0;
        for(auto [_, m_set] : rented) {
            for(auto [shop, movie] : m_set) {
                if(!isRent[shop][movie])    continue;
                res.push_back({shop, movie});
                cnt += 1;
                if(cnt == 5)
                    return res;
            }
        }
        return res;
    }
};

/**
 * Your MovieRentingSystem object will be instantiated and called as such:
 * MovieRentingSystem* obj = new MovieRentingSystem(n, entries);
 * vector<int> param_1 = obj->search(movie);
 * obj->rent(shop,movie);
 * obj->drop(shop,movie);
 * vector<vector<int>> param_4 = obj->report();
 */
```

Time Complexity : $O(??)$  
Space Complexity : $O(??)$  

## 心得  

I am going to play video games now  
