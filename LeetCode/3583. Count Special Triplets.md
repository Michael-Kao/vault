---
tags:
  - LeetCode
---

# [3583. Count Special Triplets](https://leetcode.com/problems/count-special-triplets/description/)  

+ 日期 : 2025/12/09  

## 問題描述  

給定一個數字陣列 `nums`，找出滿足條件的數組 `(i, j, k)` 的數量，  
其中 `i < j < k` 且 `nums[i] == nums[k] == nums[j] * 2`，  
取模 `10^9 + 7` 後回傳結果。  

## 直覺想法  

1. 先計算所有數字出現的次數當作 `right`  
2. 遍歷陣列，對於每個 `index j`，將 `nums[j]` 從 `right` 減去，並將 `nums[j]` 加到 `left` 中  
3. 計算 `left[nums[j] * 2] * right[nums[j] * 2]`，並累加到結果中  

## 題解  

```cpp=
class Solution {
public:
    int specialTriplets(vector<int>& nums) {
        int MOD = 1e9 + 7;
        unordered_map<int, int> cnt;
        for(int num : nums) {
            cnt[num] += 1;
        }
        int res = 0;
        unordered_map<int, int> left;
        for(int i = 0; i < nums.size(); ++i) {
            cnt[nums[i]] -= 1;
            int target = nums[i] * 2;
            long long l = left[target];
            long long r = cnt[target];
            res = (res + ((l * r) % MOD)) % MOD;
            left[nums[i]] += 1;
        }
        return res;
    }
};
```

Time Complexity : $O(n)$  
Space Complexity : $O(n)$  

## 心得  

我討厭 `MOD` 運算  
