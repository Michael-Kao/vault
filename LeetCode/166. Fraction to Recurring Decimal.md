---
tags:
  - LeetCode
---

# [166. Fraction to Recurring Decimal](https://leetcode.com/problems/fraction-to-recurring-decimal/description/)  

+ 日期 : 2025/09/24  

## 問題描述  

給定分子跟分母，回傳兩數相除後的結果，以字串形式表示。  
如果結果是循環小數，則將循環部分括在括號內。  

## 直覺想法  

1. 直接模擬長除法  
2. 使用 `Hash Map` 紀錄每次的餘數  
3. 如果餘數出現，表示開始循環  
4. 找到循環或是餘數為 `0` 就結束  

## 題解  

```cpp=
class Solution {
public:
    string fractionToDecimal(int numerator, int denominator) {
        unordered_map<long long, int> seen; // remainder -> idx
        int idx = 0;
        string res = "";
        if((numerator < 0 && denominator > 0) || (numerator > 0 && denominator < 0))  
            res += '-';
        long long nume = numerator;
        long long deno = denominator;
        nume = abs(nume);
        deno = abs(deno);
        long long left = nume / deno;
        res += to_string(left) + '.';
        nume -= left * deno;
        if(nume == 0)  res.pop_back();
        seen[nume] = idx;
        idx += 1;
        nume *= 10;
        bool isRepeat = false;
        while(nume != 0) {
            long long right = nume / deno;
            res += to_string(right);
            nume -= right * deno;
            if(seen.count(nume)) {
                isRepeat = true;
                res += ')';
                break;
            }
            seen[nume] = idx;
            idx += 1;
            nume *= 10;
        }
        if(isRepeat) {
            int pos = res.find('.') + 1 + seen[nume];
            string repeat = res.substr(pos);
            res = res.substr(0, pos);
            repeat = '(' + repeat;
            res += repeat;
        }
        return res;
    }
};
```

Time Complexity : $O(???)$  
Space Complexity : $O(???)$  

## 心得  

最近都不想整理 `code`，有寫出來就好了，總感覺在經歷低潮期。  
