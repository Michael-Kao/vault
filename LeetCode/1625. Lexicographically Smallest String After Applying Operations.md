---
tags:
  - LeetCode
---

# [1625. Lexicographically Smallest String After Applying Operations](https://leetcode.com/problems/lexicographically-smallest-string-after-applying-operations/description/)  

+ 日期 : 2025/10/19  

## 問題描述  

給定一個長度為偶數的字串 `s` 和兩個整數 `a` 和 `b`，可以對字串 `s` 做以下操作:  

1. 將 `s` 中所有奇數索引位置的字元加上整數 `a`，如果超過 'z' 則從 'a' 開始重新計算（即循環）。  
2. 將字串 `s` 向右旋轉 `b` 個位置。  

返回在對 `s` 執行任意次上述操作後，字典序最小的字串。  

## 直覺想法  

重點觀察:  

+ 假設 `i` 是奇數位，則 `s[i]` 的最小值為 `'0' + (s[i] - '0' + times * a) % 10`，`times` 表示操作 `a` 的次數。  
+ 如果 `b` 為偶數，則奇偶位不會互換位置，否則會互換位置。  
    + 即當 `b` 為奇數，原偶數位也需要考慮加 `a` 的操作。  
+ 字串旋轉的循環可以透過字串相加達成 `s = s + s`，然後取長度為 `len(s)` 的子字串。  

演算法:  

1. 建立字串 `s = s + s`，並且使用 `hash map` 紀錄目前作為起點的字串是否已經被處理過。  
2. 以 `s[i]` 作為起點，取長度為 `n` 的子字串 `sub`。  
3. 建立一個 `for loop` 處理奇數位字元的加 `a` 操作，由於至多 `10` 次操作會回到原本的字元，因此迴圈次數為 `0` 到 `9`。  
4. 判斷目前 `b` 是否為奇數，如果為奇數，則同樣的對偶數位字元進行加 `a` 操作。(同步驟 `3`)  
5. 更新每個字元為 `'0' + (s[i] - '0' + times * a) % 10`，並且將結果與目前的最小字串比較，更新最小字串。  
6. 將字串 `index i` 向右旋轉 `b` 個位置，即 `i = (i + b) % n`，並且重複步驟 `2` 到步驟 `5`，直到所有可能的起點都被處理過。  

## 題解  

```cpp=
class Solution {
public:
    string findLexSmallestString(string s, int a, int b) {
        int n = s.size();
        vector<int> vis(n);
        string res = s;
        // double the length of s for convenience in extracting the rotated
        // string t
        s = s + s;
        for (int i = 0; vis[i] == 0; i = (i + b) % n) {
            vis[i] = 1;
            for (int j = 0; j < 10; j++) {
                int k_limit = b % 2 == 0 ? 0 : 9;
                for (int k = 0; k <= k_limit; k++) {
                    // before each accumulation, re-truncate t
                    string t = s.substr(i, n);
                    for (int p = 1; p < n; p += 2) {
                        t[p] = '0' + (t[p] - '0' + j * a) % 10;
                    }
                    for (int p = 0; p < n; p += 2) {
                        t[p] = '0' + (t[p] - '0' + k * a) % 10;
                    }
                    res = min(res, t);
                }
            }
        }
        return res;
    }
};
```

Time Complexity : $O(n^2d^2)$  
Space Complexity : $O(n^2d)$  

## 心得  

我不會這種東西阿...  
什麼鬼阿，根本沒概念人怎麼想出來的？  
