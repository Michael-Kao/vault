---
tags:
  - LeetCode
---

# [2845. Count of Interesting Subarrays](https://leetcode.com/problems/count-of-interesting-subarrays/description/)  

+ æ—¥æœŸ : 2025/04/25  

## å•é¡Œæè¿°  

çµ¦ä¸€å€‹æ•¸å­—é™£åˆ— `nums` ï¼Œå’Œå…©å€‹æ•´æ•¸ `modulo` å’Œ `k` ï¼Œæ‰¾å‡ºå­é™£åˆ—çš„æ•¸é‡ï¼Œå…¶ä¸­å­é™£åˆ—è¦ç¬¦åˆä»¥ä¸‹ï¼š  

+ `cnt` ç‚º `nums[i] % modulo == k, l <= i <= r` çš„æ•¸é‡ã€‚  
+ `cnt % modulo == k` ä¹Ÿè¦æˆç«‹ã€‚  

## ç›´è¦ºæƒ³æ³•  

é¦–å…ˆè¨ˆç®—åœ¨ `index i` ä»¥å‰ï¼Œæœ‰å¤šå°‘å€‹ `nums[j] % modulo == k, j < i` çš„æ•¸é‡ï¼Œ  
ä½¿ç”¨ `prefix` é™£åˆ—ä¾†è¡¨ç¤ºï¼Œå¯ä»¥å¯«æˆ `prefix[i] = prefix[i - 1] + (nums[i - 1] % modulo == k ? 1 : 0)` ï¼Œ  
è¦æ‰¾å‡ºå€é–“ `[l, r]` ç¬¦åˆæ¢ä»¶çš„æ•¸é‡ï¼Œå¯ä»¥å¯«ç‚º `prefix[r + 1] - prefix[l]`ï¼Œç„¶å¾Œå°‡å…¶ç¬¦åˆç¬¬äºŒå€‹æ¢ä»¶ï¼Œ  
`(prefix[r + 1] - prefix[l]) % modulo == k`ï¼Œä»£æ›å¼å­å¯å¾— `(prefix[r + 1] - k + modulo) % modulo == prefix[l] % modulo`ï¼Œ  
æ„æ€æ˜¯åªè¦æ‰£é™¤ `abs(prefix[r + 1] - k)` é€™å€‹æ•¸é‡å¾Œï¼Œå°±æœƒç¬¦åˆæ¢ä»¶äºŒï¼Œé‚£éº¼æˆ‘åªè¦å»æ‰¾åœ¨ `r + 1` ä¹‹å‰å‡ºç¾éé€™å€‹æ•¸å­—çš„æ•¸é‡å°±å¯ä»¥äº†ã€‚  

è‹¥ `prefix[r + 1] == k` è¡¨ç¤ºè©²å­é™£åˆ—çš„å€é–“ç‚º `[0, r]` ï¼Œå› æ­¤æœƒå»æŸ¥æ‰¾ `count[0]` çš„æ•¸é‡ï¼Œ  
å› æ­¤éœ€å°‡ base case è¨­å®šç‚º `count[0] = 1` ï¼Œé¿å…æ¼æ‰å¾ `0` é–‹å§‹çš„æƒ…æ³ã€‚  

[Explain by Gemini](https://docs.google.com/document/d/1cL9wBnIE-R3FquahUU8cFi1OPcwLjjGuzQLFs9AOFDc/edit?tab=t.0)  

## é¡Œè§£  

```cpp=
class Solution {
public:
    long long countInterestingSubarrays(vector<int>& nums, int modulo, int k) {
        int n = nums.size();
        long long res = 0;
        unordered_map<int, int> count;
        // if current prefix == k, then we get the answer from count[0]
        // which means subarray [0, i-1], a subarray's left start from 0
        count[0] = 1;
        vector<int> prefix(n + 1, 0);
        for(int i = 1; i <= n; ++i) {
            prefix[i] = prefix[i - 1] + ((nums[i - 1] % modulo == k) ? 1 : 0);
            res += count[(prefix[i] - k + modulo) % modulo];
            count[prefix[i] % modulo] += 1;
        }
        return res;
    }
};
```

Time Complexity : $O(n)$  
Space Complexity : $O(n)$  

## å¿ƒå¾—  

é€™å€‹æœˆçš„é¡Œç›®ä¸åªæ²’æƒ³æ³•ï¼Œçœ‹äº†è§£ç­”é‚„çœ‹ä¸æ‡‚ï¼Œéå»çš„ä¿¡å¿ƒè¢«ç‹ ç‹ çš„æ“Šå® ğŸ¤¡  
