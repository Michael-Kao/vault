---
tags:
  - LeetCode
---

# [2327. Number of People Aware of a Secret](https://leetcode.com/problems/number-of-people-aware-of-a-secret/description/)  

+ 日期 : 2025/09/09  

## 問題描述  

給定數字 `n` 、`delay` 、`forget`，一開始有一個人，經過 `delay` 天後可以分享秘密，  
並且在 `forget` 天後忘記秘密，忘記秘密當天也不能分享秘密，問在第 `n` 天有多少人知道秘密，  
答案需要對 `10^9 + 7` 取模。  

## 直覺想法  

使用 `queue` 來模擬過程，在 `queue` 中儲存當天新知道秘密的人數，  
並且紀錄這些人在哪一天開始可以分享秘密，在哪一天忘記秘密，  
隨著時間的推移，將 `queue` 中的元素依序取出，並根據 `delay` 和 `forget` 的規則來更新知道秘密的人數。  

## 題解  

```cpp=
class Solution {
public:
    int peopleAwareOfSecret(int n, int delay, int forget) {
        int MOD = 1e9 + 7;
        queue<pair<int, int>> q; // [count, start]
        queue<pair<int, int>> q2; // [count, end]
        int cur = 1;
        int pp = 0;
        q.push({cur, 0 + delay});
        q2.push({cur, 0 + forget});
        for(int time = 0; time < n; ++time) {
            if(!q2.empty() && q2.front().second == time) {
                auto [count, _] = q2.front();
                q2.pop();
                pp -= count;
                cur -= count;
                pp = (1ll * pp + MOD) % MOD;
                cur = (1ll * cur + MOD) % MOD;
            }
            if(!q.empty() && q.front().second == time) {
                auto [count, _] = q.front();
                q.pop();
                pp = (pp + count) % MOD;
            }
            if(pp != 0) {
                q.push({pp, time + delay});
                q2.push({pp, time + forget});
                cur = (cur + pp) % MOD;
            }
        }
        return cur;
    }
};
```

Time Complexity : $O(n)$  
Space Complexity : $O(n)$  

## 心得  

題目是 `< n` 還是 `<= n` 看清楚，低能兒，浪費一堆時間  
