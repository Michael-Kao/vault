---
tags:
  - LeetCode
---

# [3433. Count Mentions Per User](https://leetcode.com/problems/count-mentions-per-user/description/)  

+ 日期 : 2025/12/12  

## 問題描述  

Don't bother to do this stupid problem.  
I passed it but I think it's a waste of time.  

## 直覺想法  

1. 根據 `timestamp` 排序，若 `timestamp` 相同，則 `OFFLINE` 優先  
2. 用一個 `online` 計算 `numberOfUsers` 各自的在線狀態  
3. 處理 `message events`  

## 題解  

```cpp=
class cmp {
public:
    bool operator()(vector<string> &a, vector<string> &b) {
        int _a = stoi(a[1]);
        int _b = stoi(b[1]);
        if(_a == _b) {
            return (b[0] == "OFFLINE") ? false : true;
        }
        return _a < _b;
    }
};
class Solution {
public:
    vector<int> countMentions(int numberOfUsers, vector<vector<string>>& events) {
        sort(events.begin(), events.end(), cmp());
        int n = events.size();
        vector<int> online(numberOfUsers, 0);
        vector<int> res(numberOfUsers, 0);
        for(int i = 0; i < n; ++i) {
            if(events[i][0] == "MESSAGE") {
                int time = stoi(events[i][1]);
                std::size_t found = events[i][2].find(' ');
                int pos = 0;
                while(found != string::npos) {
                    string target = events[i][2].substr(pos, found - pos);
                    if(target == "ALL") {
                        for(int j = 0; j < numberOfUsers; ++j) {
                            res[j] += 1;
                        }
                    } else if(target == "HERE") {
                        for(int j = 0; j < numberOfUsers; ++j) {
                            if(time >= online[j])   res[j] += 1;
                        }
                    } else {
                        int id = stoi(target.substr(2));
                        res[id] += 1;
                    }
                    pos = found + 1;
                    found = events[i][2].find(' ', pos);
                }
                string target = events[i][2].substr(pos);
                if(target == "ALL") {
                    for(int j = 0; j < numberOfUsers; ++j) {
                        res[j] += 1;
                    }
                } else if(target == "HERE") {
                    for(int j = 0; j < numberOfUsers; ++j) {
                        if(time >= online[j])   res[j] += 1;
                    }
                } else {
                    int id = stoi(target.substr(2));
                    res[id] += 1;
                }
            } else {
                int id = stoi(events[i][2]);
                online[id] = stoi(events[i][1]) + 60;
            }
        }
        return res;
    }
};
```

Time Complexity : $O(nm+mlogmlogt)$  
Space Complexity : $O(n)$  

## 心得  

寫題目的人有病  
